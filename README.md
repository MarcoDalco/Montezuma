This is a Maven project. Its purpose is to automatically generate unit tests basing on real-time execution data, captured using Aspect Oriented Programming techniques. It can also replay the same execution over and over. It is therefore split over 3 modules (Recording, Replaying, Test-Generation), a "common" module and a test-cases module.


Set up in Eclipse:

1) mvn eclipse:clean
2) mvn eclipse:eclipse
3) Import as Existing Maven Project (File --> Import... --> Maven --> Existing Maven Projects)


Run recordings:

0) No exceptions are expected to be logged during the following steps, but red lines should appear due to AspectJ logging.
1) Navigate to montezuma-cases/src/main/java/org/montezuma/test/traffic/recording/cases/RecordAll.java (or any in that same package), right-click on it and Run As... Java Application. It will run without recording execution data.
2) Change the last Run Configuration (Menu Run --> Run Configurations...) to add VM arguments (Arguments tab --> VM arguments): add "-javaagent:/Users/username/.m2/repository/org/aspectj/aspectjweaver/1.8.6/aspectjweaver-1.8.6.jar" without double-quotes; change the path and versions according to what you have on your PC. If you don't have it, you can download it here: https://eclipse.org/aspectj/downloads.php . TODO: add aspectjweaver dependency to main pom.xml
3) Run the RecordAll.java class again. It should run recording the execution data. To check that, check the montezuma-cases/recordings directory. It should now not be empty any more.
4) You can replay the executions by running as Java Application: montezuma-cases/src/main/java/org/montezuma/test/traffic/replaying/cases/ReplayAll.java (it doesn't need extra VM arguments)
5) Run as Java Application montezuma-cases/src/main/java/org/montezuma/test/traffic/writing/cases/WriteAll.java
6) Refresh the montezuma-cases/src/generatedtests folder. A 'java' subfolder should appear.
7) Right-click on the appeared 'java', click on Build Path --> Use as Source Folder. The new source folder will contain the generated test classes, possibly with compile-time errors.
8) Right-click on the newly added java source folder (montezuma-cases/src/generatedtests/java) and Run As... Unit Tests. Confirm if asked to proceed regardless of the existing project errors. Unit tests should be run, some likely failing.

Extra optional steps:
9) Run the shell script "move_tests_to_previous.sh" in the Montezuma's root folder.
10) Run As... Java Application: montezuma-cases/src/main/java/org/montezuma/test/traffic/writing/cases/WriteAllNoMocking.java
11) Run the shell script "compare_generated_tests.sh" in the Montezuma's root folder. This should fire-up 'meld' comparing the test classes as generated by WriteAll and WriteAllNoMocking. If you don't have meld, you can install it on Mac with 'brew install meld' or on Linux probably with something like 'sudo apt-get install meld' or on Windows use WinMerge, or perhaps just compare the 'previous_generated_tests' and 'src/generatedtests' folders with a diff program, like 'diff'.